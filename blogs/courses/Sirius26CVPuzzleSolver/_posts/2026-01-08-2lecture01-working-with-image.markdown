---
layout: ru/blogs/courses/Sirius26CVPuzzleSolver/post
title:  "Занятие 1: Что такое картинка? Осветлим, заблюрим, обострим, уменьшим!"
date:   2026-01-08 21:30:40 +0300
lang:   ru
categories: Sirius26CVPuzzleSolver
---

1) Убедитесь что есть компилятор и IDE. Я предпочитаю CLion ([установщик на яндекс.диске](https://disk.yandex.ru/d/TStFP2QADw0-BQ)), но любая IDE (или текстовый редактор подойдут):

1.1) Если вы на **windows** - советую установить **Visual Studio Community** (чтобы использовать ее компилятор) и затем утановить **CLion**

1.2) Если вы на **linux** - советую установить **CLion** (нам подойдет любой компилятор g++/clang)

1.3) Если вы на **macos** - советую установить **CLion** (нам подойдет любой компилятор g++/clang)

2) Создайте пустой CMake + C++ проект, запустите main.cpp, убедитесь что он выводит ```Hello, World!```

3) Создайте локальный git репозиторий (или даже лучше - выложите свой проект на гитхаб, в частности это даст автоматическую проверку юнит-тестов после каждого коммита), подробнее как это сделать [описано тут](/blogs/239/2025/school239_108_2025_2026/2025/12/11/how-to-use-llm.html#%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%B4%D0%B0-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-git-%D0%B2-%D0%B8%D0%B4%D0%B5%D0%B0%D0%BB%D0%B5-%D1%85%D1%80%D0%B0%D0%BD%D1%8F-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82-%D0%BD%D0%B0-github)

4) Изучите ```main.cpp``` (код) и ```CMakeLists.txt``` (описывает что нужно компилировать). Сделайте ```commit``` (и ```push``` если выложили на github/gitlab) этих двух файлов с сообщением навроде ```basic hello world project```

CI, Continous Integration - автоматическая проверка коммитов
---

5) Если используете github - добавьте автоматическую проверку что код компилируется (т.н. ```Continous Integration``` - **CI**), например просто спросите ChatGPT:

```
У меня есть простой C++ проект
В нем два файла main.cpp и CMakeLists.txt (простой hello world)
Я выложил этот проект на github
Как мне сделать так чтобы у меня появился Continous Integration (CI)?
Т.е. чтобы github при каждом моем изменении проекта (commit+push) проверял что мой проект компилируется под windows, linux, macos?
```

Оказывается достаточно добавить некий файл конфигурации CI ```/.github/workflows/ci.yml``` - [см. например мой коммит](https://github.com/CompVisionCourses/CVPuzzleSolver/commit/99ed66425bf5be809c5cc4125b32792ded5fa07e). Если вам что-то в нем любопытно - **спросите** меня или ChatGPT!

Запушьте этот файл и обратите внимание что теперь у коммитов появляются галочки если все компилируется (и красные крестики если случилась какая-то ошибка компиляции).

Например у меня появился красный крестик из-за того что в CMakeLists.txt требуется версия 4.1 или выше, а на GitHub CI оказалось 3.31:

![GitHub CI fail example](/static/2026/01/CI_fail_example.png)

Исправляем это снизив требования к версии CMake, делаем commit+push, смотрим на красивую зеленую галочку:

![GitHub CI OK example](/static/2026/01/CI_ok_example.png)

Как добавить в проект считывание картинок
---

Когда я готовил черновой проект - многое писала LLM, например создать простой проект без использования внешних библиотек можно вот так: [см. на этот промпт](https://github.com/UnicornGlade/ComputerVisionPuzzleSolver/blob/main/prompts/01%20%D0%B8%D0%B7%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0.txt)

Практическая часть
---

Предлагаю вам начать с [проекта-заготовки](https://github.com/CompVisionCourses/CVPuzzleSolver), там уже есть весь скелет проекта и пример фотографии.

Считаем картинку, сделаем ярче, сохраним
---

Итак, вы скачали проект-заготовку, открыли его в CLion, может быть выложили у себя на github ради CI.

```Задание 1``` Запустите main и убедитесь что черная картинка сохранилась по пути ```copy.jpg```.

Если кидает ошибку что картинка по относительному пути не найдена - проверьте папку из которой запускается программа - **working directory** (и выставите ее так чтобы она указала на корень проекта):

![Edit configuration to edit working directory](/static/2026/01/edit_cofiguration_edit_working_directory.png)

Картинка - это матрица пикселей. В каждом пикселе значение яркости (одно если черно-белая картинка, три - если трехканальная: RGB - **Red Green Blue**).

Индексация бывает разной, но наша конвенция такая (полезно держать либо иллюстрацию, либо на бумажке картинку, чтобы не путаться):

![Image coordintes system](/static/2026/01/image_coordinates_system.png)

```Задание 2``` Теперь давайте как-то воздействуем на картинку, например осветлим ее - пробегите в цикле по всем пикселям, по всем трем каналам - домножьте на два. Запустите, стала ли картинка ярче? Попробуйте еще как-то поэкспериментировать.

Размытие картинки (гауссов блюр)
---

```Вопрос``` Что такое резкость? Что такое размытие? Какая из этих двух картинок более резкая, какая более размытая?

![Two images sharpness](/static/2026/01/two_images_sharpness.png)

```Вопрос``` Давайте сделаем картинку более размытой, как этого добиться?

```Задание 3``` В main.cpp сделайте картинку более размытой - в пикселе-результате посчитайте среднюю яркость в некоторой окрестности, например в окне 10х10.

Гауссово размытие (Гауссов блюр) - это **взвешенное среднее** (**свертка** с ядром Гаусса, **convolution**), веса выглядят так:

![Gaussian kernel 1D and 2D](/static/2026/01/gaussian_filter_1d_2d.png)

```Вопрос``` Какие свойства отличаются у гауссова размытия от усреднения в окне?

Увеличиваем резкость картинки
---

```Вопрос``` Что будет если взять картинку А, размыть ее и получить картинку B. Затем найти картинку C=A+(A-B). Как будет выглядеть картинка?

```Задание 4``` Попробуйте!

Уменьшаем размер картинки
---

```Задание 5``` Постройте картинку в 16 раз меньше. Как вам качество результата? А что делать если коэффициент уменьшения размера не целый?

```Задание 6``` Возьмите любой из ваших алгоритмов и попробуйте ускорить его с помощью многопоточности (советую использовать OpenMP). Дополнительно нужно замерить сколько времени выполнялась обработка. Пример промпта:

```
Дорогой ChatGPT, не передать словами как я рад снова с тобой беседовать
Не мог бы ты мне помочь, дорогой друг?
У меня есть CMakeLists.txt + main.cpp (прилагаю ниже)
Обрати внимание что у меня есть цикл преобразующий картинку
1) добавь замер времени сколько занимает этот цикл
2) сделай переменную bool with_openmp = true;
3) если она выставлена в true - цикл обработки картинки должен выполняться многопоточно с помощью OpenMP
CMakeLitst.txt + main.cpp ниже:
... 
```

Выводы
===

- **Картинка - это функция**. Картинка мало отличается от дискретизированной функции, например в "картинке" может храниться ландшафт - карта высот местности
- **Локальный git** - это просто и удобно, позволяет сохранять промежуточные изменения
- **GitHub Actions CI** - позволяет при каждом commit+push проверять что вы случайно не сломали проект
- **Многое можно узнать от LLM** - если задавать ей вопросы а не просить дать готовый результат
- **Следить за конвенциями/системами координат** - чтобы меньше путаться, меньше багать и легче проверять код на корректность

К следующему занятию
===

```Задание 7``` Преобразуйте картинку из цветной в черно-белую. Попробуйте сделать не всю картинку ярче, а только какой-то один канал.

```Вопрос``` Зная что у нас темный фон - как автоматически угадывать его цвет чтобы про каждый пиксель понять - фон это или кусок пазла? А что если в какой-то фотографии фон более темный, а в какой-то более светлый?

```Задание 8``` Подумайте, может у вас появятся вопросы к коду, структуре проекта или чему-то еще.
